import{_ as k,r as y,o as F,a as L,b as u,c as v,d as r,t as I,e as d,n as x,F as T,f as B,g as $,h as M,w as q,v as W,i as N,p as j,j as G,u as U,k as H,l as S,m as J,q as D,s as _,T as K}from"./index.6a59fe0b.js";import{C as O}from"./CountryCard.09450da2.js";const Q=["textContent"],X=["onClick"],Y={key:0,class:"field-select__no-data"},Z={__name:"InputSelect",props:{items:{type:Array,default:[]},selectedValue:{type:String,required:!1,default:""}},emits:["change-value"],setup(i,{emit:a}){const n=i,o=y(!1),t=y(""),f=m=>{o.value=m},g=m=>{t.value=m,a("change-value",m),f(!1)};return F(()=>{t.value=n.selectedValue}),(m,p)=>{const w=L("icon");return u(),v("div",{tabindex:"0",class:"field field--small field-select elevation-2",onFocusout:p[2]||(p[2]=h=>f(!1))},[r("span",{id:"search-region",class:"field__input",textContent:I(t.value),onClick:p[0]||(p[0]=h=>f(!o.value))},null,8,Q),r("label",{class:"field__label",onClick:p[1]||(p[1]=h=>f(!o.value))},[d(w,{name:"chevron",class:x({"rotate-transition":!0,"rotate-transition--active":o.value})},null,8,["class"])]),r("ul",{class:x(["field-select__list elevation-2",{"field-select__list--active":o.value}])},[(u(!0),v(T,null,B(i.items,(h,b)=>(u(),v("li",{class:x(["field-select__item",{"field-select__item--selected":h===t.value}]),key:b,onClick:V=>g(h)},I(h),11,X))),128)),i.items.length===0?(u(),v("span",Y,"No data")):$("",!0)],2)],32)}}},ee=k(Z,[["__scopeId","data-v-8a6174d5"]]);const te={for:"search-input",class:"field__label"},ne=["placeholder","maxlength"],se={__name:"InputText",props:{hint:{type:String,default:""},clearable:{type:Boolean,default:!1},limit:{type:Number,default:500}},emits:["change-value"],setup(i,{emit:a}){const n=y(""),o=()=>{a("change-value",n.value)},t=()=>{n.value="",a("change-value",n.value)};return(f,g)=>{const m=L("icon");return u(),v("div",{class:x(["field field--large elevation-2",{"field--clearable":i.clearable}])},[r("label",te,[M(f.$slots,"icon",{},void 0,!0)]),q(r("input",{type:"text",placeholder:i.hint,maxlength:i.limit,class:"field__input",id:"search-input",autocomplete:"off",onInput:o,"onUpdate:modelValue":g[0]||(g[0]=p=>n.value=p)},null,40,ne),[[W,n.value]]),i.clearable&&n.value!=""?(u(),N(m,{key:0,name:"close",class:"icon-close",onClick:t})):$("",!0)],2)}}},ae=k(se,[["__scopeId","data-v-06ca4449"]]);const oe={},le={class:"spinner"};function re(i,a){return u(),v("div",le)}const ie=k(oe,[["render",re],["__scopeId","data-v-f1113475"]]);const ce={},ue=i=>(j("data-v-437c36fd"),i=i(),G(),i),_e={class:"error-connection"},de={class:"error-connection__content"},ve=ue(()=>r("div",{class:"error-connection__text"},[r("p",null,"Network Error!"),r("p",null,"Please try again later")],-1));function fe(i,a){const n=L("icon");return u(),v("div",_e,[r("div",de,[d(n,{name:"alert",color:"error",size:200}),ve])])}const pe=k(ce,[["render",fe],["__scopeId","data-v-437c36fd"]]);const me={class:"world-view"},ge={class:"bar-wrapper"},he={class:"filter-options"},Ce={class:"control"},ye={class:"control__actions"},xe={class:"control__pagination"},$e={class:"countries-gallery"},we={class:"no-data__text"},Le={__name:"World",setup(i){const a=y(0),n=32,o=y(0),t=U(),f=y(""),g=y("all"),m=H(),p=e=>{e==="All regions"?g.value="all":g.value=e},w=async()=>{if(!t.loadingData)try{await t.getCountries()}catch{t.errorConnection=!0}finally{t.loadingData=!1}},h=e=>{f.value=e},b=S(()=>{let e=[];return e.push("All regions"),t.regions.length>0&&t.regions.forEach(l=>{e.push(l)}),e}),V=e=>{m.push({name:"CountryDetail",params:{cca3:e.cca3}})},C=S(()=>{z();let e=t.countries.slice(),l=f.value||"",c=g.value||"all";return!l&&!c||!l&&c==="all"?e:l&&!c?e.filter(s=>s.name.common.toLowerCase().trim().includes(l.toLowerCase().trim())):!l&&c?e.filter(s=>s.region.toLowerCase().trim().includes(c.toLowerCase().trim())):l&&c==="all"?e.filter(s=>s.name.common.toLowerCase().trim().includes(l.toLowerCase().trim())||s.capital&&s.capital[0].toLowerCase().trim().includes(l.toLowerCase().trim())):e.filter(s=>s.name.common.toLowerCase().trim().includes(l.toLowerCase().trim())&&s.region.toLowerCase().trim().includes(c.toLowerCase().trim())||s.capital&&s.capital[0].toLowerCase().trim().includes(l.toLowerCase().trim())&&s.region.toLowerCase().trim().includes(c.toLowerCase().trim()))}),E=S(()=>{let e=C.value.length;return e>0?(a.value===0&&(o.value=e<n?e:n),o.value>e?`${a.value+1} - ${e} of ${e}`:`${a.value+1} - ${o.value} of ${e}`):"-"}),P=()=>{a.value===0||C.value.length===0||(a.value-=n,o.value-=n)},R=()=>{let e=C.value.length;e===0||o.value===e||a.value+n<e&&(a.value+=n,o.value+=n)},z=()=>{a.value=0,o.value=0};return J(()=>{t.hasCountries||w()}),(e,l)=>{const c=L("icon");return u(),v("section",me,[r("div",ge,[r("div",he,[d(ae,{class:"filter-options__search",clearable:!0,hint:"Search for a country...",limit:250,onChangeValue:h},{icon:D(()=>[d(c,{name:"search"})]),_:1},8,["hint"]),d(ee,{class:"filter-options__select",onChangeValue:p,"selected-value":_(b)[0],items:_(b),ref:"regionSelectInput"},null,8,["selected-value","items"]),d(c,{name:"refresh",class:"button button--icon filter-options__refresh elevation-3",onClick:w}),r("div",Ce,[r("div",ye,[d(c,{name:"chevron",class:x(["button button--icon transparent icon--left",{"button--disabled":a.value===0}]),onClick:l[0]||(l[0]=s=>P())},null,8,["class"]),d(c,{name:"chevron",class:x(["button button--icon transparent icon--right",{"button--disabled":o.value>=_(C).length}]),onClick:l[1]||(l[1]=s=>R())},null,8,["class"])]),r("span",xe,I(_(E)),1)])])]),r("div",$e,[d(K,{class:"countries-gallery__list",ref:"countriesList",tag:"ul",name:"list-transition"},{default:D(()=>[(u(!0),v(T,null,B(_(C).slice(a.value,o.value),(s,A)=>(u(),v("li",{class:"countries-gallery__item",key:A},[d(O,{onClick:be=>V(s),data:s,dense:!0},null,8,["onClick","data"])]))),128))]),_:1},512),_(C).length===0&&!_(t).loadingData&&!_(t).errorConnection?(u(),v("div",{key:0,class:x(["no-data",{"no-data--show":_(C).length===0}])},[d(c,{name:"alert",class:"no-data__icon",size:128}),r("span",we,'No results for "'+I(f.value)+'"',1)],2)):$("",!0),_(t).loadingData?(u(),N(ie,{key:1})):$("",!0),_(t).errorConnection?(u(),N(pe,{key:2})):$("",!0)])])}}};export{Le as default};
